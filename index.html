<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AA - AykolinoApps - UTM Code Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* For a subtle scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-300 min-h-screen flex items-center justify-center p-4">
    
    <div class="w-full max-w-2xl">
        <div class="bg-slate-800 rounded-xl shadow-2xl p-6 md:p-8 space-y-6 border border-slate-700">
            <h1 class="text-2xl md:text-3xl font-bold text-center text-white">UTM Code Generator</h1>
            
            <!-- Form Inputs -->
            <div class="space-y-4">
                <!-- Website URL -->
                <div>
                    <label for="website-url" class="block text-sm font-medium mb-1 text-slate-400">Website-URL *</label>
                    <div class="flex items-center space-x-2">
                        <input type="url" id="website-url" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2.5 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition" placeholder="https://example.com" required>
                        <button id="paste-btn" class="bg-blue-600 text-white px-4 py-2.5 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200 whitespace-nowrap">Einfügen</button>
                    </div>
                </div>

                <!-- UTM Source -->
                <div>
                    <label for="utm-source" class="block text-sm font-medium mb-1 text-slate-400">UTM Source *</label>
                    <input type="text" id="utm-source" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2.5 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition placeholder-slate-500" placeholder="z.B. newsletter, twitter, google">
                </div>

                <!-- UTM Medium -->
                <div>
                    <label for="utm-medium" class="block text-sm font-medium mb-1 text-slate-400">UTM Medium *</label>
                    <input type="text" id="utm-medium" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2.5 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition placeholder-slate-500" placeholder="z.B. E-mail, social, cpc">
                </div>
                
                <!-- UTM Campaign -->
                <div>
                    <label for="utm-campaign" class="block text-sm font-medium mb-1 text-slate-400">UTM Campaign *</label>
                    <input type="text" id="utm-campaign" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2.5 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition placeholder-slate-500" placeholder="z.B. promotion, sale">
                </div>

                <!-- UTM Content -->
                <div>
                    <label for="utm-content" class="block text-sm font-medium mb-1 text-slate-400">UTM Content</label>
                    <input type="text" id="utm-content" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2.5 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition placeholder-slate-500" placeholder="z.B. any CTA, Headline">
                </div>

                <!-- UTM Term -->
                <div>
                    <label for="utm-term" class="block text-sm font-medium mb-1 text-slate-400">UTM Term</label>
                    <input type="text" id="utm-term" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2.5 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition placeholder-slate-500" placeholder="Keywords für Ihre bezahlten Suchkampagnen">
                </div>
            </div>

            <!-- Generated URL Output -->
            <div class="pt-4">
                <label class="block text-sm font-medium mb-1 text-slate-400">Generierte URL</label>
                <div class="flex items-center space-x-2">
                    <input id="generated-url" readonly class="w-full bg-slate-700 text-slate-200 border border-slate-600 rounded-lg p-2.5 select-all break-all cursor-copy">
                    <button id="copy-btn" class="bg-pink-600 text-white px-4 py-2.5 rounded-lg font-semibold hover:bg-pink-700 transition-colors duration-200">Kopieren</button>
                </div>
            </div>
        </div>
        <footer class="mt-6 text-slate-500 text-sm flex justify-between items-center px-2">
            <div>Version 1.01</div>
            <div>©AykolinoApps</div>
        </footer>
    </div>


    <script>
        // DOM Elements
        const inputs = {
            url: document.getElementById('website-url'),
            source: document.getElementById('utm-source'),
            medium: document.getElementById('utm-medium'),
            campaign: document.getElementById('utm-campaign'),
            content: document.getElementById('utm-content'),
            term: document.getElementById('utm-term'),
        };
        const generatedUrlInput = document.getElementById('generated-url');
        const pasteBtn = document.getElementById('paste-btn');
        const copyBtn = document.getElementById('copy-btn');

        // Function to generate the UTM URL
        const generateUrl = () => {
            let baseUrl = inputs.url.value.trim();

            if (!baseUrl) {
                generatedUrlInput.value = '';
                return;
            }

            // Add http:// if no protocol is present
            if (!/^(https?:\/\/)/i.test(baseUrl)) {
                baseUrl = 'https://' + baseUrl;
            }

            try {
                const url = new URL(baseUrl);

                // Clear existing UTM params to avoid duplicates
                const paramsToDelete = [];
                url.searchParams.forEach((value, key) => {
                    if (key.startsWith('utm_')) {
                        paramsToDelete.push(key);
                    }
                });
                paramsToDelete.forEach(key => url.searchParams.delete(key));

                // Add UTM parameters
                if (inputs.source.value.trim()) url.searchParams.set('utm_source', inputs.source.value.trim());
                if (inputs.medium.value.trim()) url.searchParams.set('utm_medium', inputs.medium.value.trim());
                if (inputs.campaign.value.trim()) url.searchParams.set('utm_campaign', inputs.campaign.value.trim());
                if (inputs.content.value.trim()) url.searchParams.set('utm_content', inputs.content.value.trim());
                if (inputs.term.value.trim()) url.searchParams.set('utm_term', inputs.term.value.trim());
                
                generatedUrlInput.value = url.toString();

            } catch (error) {
                // Handle invalid URL
                generatedUrlInput.value = 'Ungültige URL';
            }
        };

        // Event Listeners for all inputs
        Object.values(inputs).forEach(input => {
            input.addEventListener('input', generateUrl);
        });

        // Paste button functionality
        pasteBtn.addEventListener('click', async () => {
            try {
                const text = await navigator.clipboard.readText();
                inputs.url.value = text;
                generateUrl();
            } catch (err) {
                console.error('Fehler beim Lesen der Zwischenablage: ', err);
            }
        });

        // Copy button functionality
        copyBtn.addEventListener('click', () => {
            const urlToCopy = generatedUrlInput.value;
            if (!urlToCopy || urlToCopy === 'Ungültige URL') return;
            
            // Using document.execCommand for better compatibility in iFrames
            const tempInput = document.createElement('input');
            tempInput.style.position = 'absolute';
            tempInput.style.left = '-9999px';
            tempInput.value = urlToCopy;
            document.body.appendChild(tempInput);
            tempInput.select();
            
            try {
                document.execCommand('copy');
                // Visual feedback
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'Kopiert!';
                copyBtn.classList.add('bg-green-500', 'hover:bg-green-600');
                copyBtn.classList.remove('bg-pink-600', 'hover:bg-pink-700');
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                    copyBtn.classList.remove('bg-green-500', 'hover:bg-green-600');
                    copyBtn.classList.add('bg-pink-600', 'hover:bg-pink-700');
                }, 2000);
            } catch (err) {
                console.error('Kopieren fehlgeschlagen: ', err);
            }
            
            document.body.removeChild(tempInput);
        });
        
        // Also copy when clicking the generated URL field itself
        generatedUrlInput.addEventListener('click', () => {
             if (generatedUrlInput.value) {
                copyBtn.click();
            }
        });

        // Marquee Title Effect
        (function() {
            const originalTitle = document.title + " ";
            let titleText = originalTitle;
            function marquee() {
                titleText = titleText.substring(1, titleText.length) + titleText.substring(0, 1);
                document.title = titleText;
            }
            setInterval(marquee, 300); // Speed in milliseconds
        })();
    </script>
</body>
</html>

